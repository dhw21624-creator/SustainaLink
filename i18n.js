window.i18n = (function() {
  const translations = {
    en: {
      title: "SustainaLink Smart Campus",
      login: "Login",
      logout: "Logout",
      quiz: "Eco Quiz",
      leaderboard: "Leaderboard",
      points: "Your Points",
      userId: "User ID",
      role: "Role",
      student: "Student",
      staff: "Staff",
      admin: "Administrator",
      startChallenge: "Start Challenge",
      weeklyProgress: "Weekly Progress",
      achievements: "Recent Achievements",
      ecoHero: "Eco Hero",
      plasticMaster: "Plastic Master",
      topLeaderboard: "Top 5 Leaderboard",
      uploadPhoto: "Upload a photo",
      aiDetected: "AI detected",
      confidence: "Confidence",
      whichCategory: "Which category does this belong to?",
      categoryPaper: "Paper",
      categoryPlastic: "Plastic",
      categoryMetal: "Metal",
      isRecyclable: "Is this item recyclable?",
      yes: "Yes",
      no: "No",
      tapRfid: "Simulate RFID Tap (+5)",
      backToDashboard: "Back to Dashboard",
      tabsIndividual: "Individual",
      tabsClass: "Class",
      tabsDepartment: "Department",
      rankingDaily: "Daily",
      rankingWeekly: "Weekly",
      rankingSemester: "Semester",
      deptParticipation: "Department Participation Rate",
      topContributors: "Top Contributing Classes/Clubs",
      createChallenge: "Create new eco-competition for your students",
      challengeName: "Challenge name",
      startDate: "Start date",
      endDate: "End date",
      pointsReward: "Points reward",
      description: "Description",
      create: "Create",
      energyTrends: "Energy usage trends by floor",
      overview: "Overview",
      totalUsers: "Total Users",
      totalBins: "Total Bins",
      activeIoT: "Active IoT Devices",
      avgAccuracy: "Avg. Quiz Accuracy",
      submissionsToday: "Submissions Today",
      tabUserMgmt: "User Management",
      tabAiLog: "AI Performance Log",
      tabFloorReports: "Floor Reports",
      addUser: "Add User",
      edit: "Edit",
      delete: "Delete",
      exportCsv: "Export CSV Report",
      energyWasteDashboard: "Energy & Waste Dashboard",
      modeWaste: "Waste",
      modeEnergy: "Energy",
      wastePerFloor: "Waste items collected per floor",
      electricityUsageDept: "Electricity usage by department",
      prototypeFooter: "Prototype • Mock Data • Hong Kong Polytechnic University (WK)",
    },
    zh: {
      title: "SustainaLink 智慧綠色校園",
      login: "登入",
      logout: "登出",
      quiz: "環保問答",
      leaderboard: "排行榜",
      points: "你的積分",
      userId: "用戶編號",
      role: "角色",
      student: "學生",
      staff: "教職員",
      admin: "管理員",
      startChallenge: "開始挑戰",
      weeklyProgress: "每週進度",
      achievements: "近期成就",
      ecoHero: "環保英雄",
      plasticMaster: "塑膠達人",
      topLeaderboard: "排行榜前五名",
      uploadPhoto: "上載照片",
      aiDetected: "AI 辨識",
      confidence: "信心",
      whichCategory: "此物屬於哪個分類？",
      categoryPaper: "紙類",
      categoryPlastic: "塑膠",
      categoryMetal: "金屬",
      isRecyclable: "此物可回收嗎？",
      yes: "是",
      no: "否",
      tapRfid: "模擬 RFID 感應（+5）",
      backToDashboard: "返回儀表板",
      tabsIndividual: "個人",
      tabsClass: "班級",
      tabsDepartment: "部門",
      rankingDaily: "每日",
      rankingWeekly: "每週",
      rankingSemester: "學期",
      deptParticipation: "部門參與率",
      topContributors: "最活躍班級 / 社團",
      createChallenge: "為學生建立新的環保比賽",
      challengeName: "挑戰名稱",
      startDate: "開始日期",
      endDate: "結束日期",
      pointsReward: "積分獎勵",
      description: "描述",
      create: "建立",
      energyTrends: "各樓層的能源使用趨勢",
      overview: "總覽",
      totalUsers: "用戶總數",
      totalBins: "垃圾桶總數",
      activeIoT: "活躍物聯網設備",
      avgAccuracy: "平均問答準確率",
      submissionsToday: "今日提交",
      tabUserMgmt: "用戶管理",
      tabAiLog: "AI 表現紀錄",
      tabFloorReports: "樓層報告",
      addUser: "新增用戶",
      edit: "編輯",
      delete: "刪除",
      exportCsv: "匯出 CSV 報告",
      energyWasteDashboard: "能源與垃圾儀表板",
      modeWaste: "垃圾",
      modeEnergy: "能源",
      wastePerFloor: "各樓層收集的垃圾項目",
      electricityUsageDept: "各部門電力使用情況",
      prototypeFooter: "原型 • 模擬數據 • 香港理工大學（西九龍校園）",
    }
  };

  let current = localStorage.getItem('lang') || 'en';

  function setLanguage(lang) {
    current = lang;
    localStorage.setItem('lang', lang);
    const brandText = document.getElementById('brandText');
    const footerText = document.getElementById('footerText');
    if (brandText) brandText.textContent = t('title');
    if (footerText) footerText.textContent = t('prototypeFooter');
  }

  function t(key) {
    return translations[current]?.[key] || key;
  }

  return { setLanguage, t, get lang() { return current; } };
})();

